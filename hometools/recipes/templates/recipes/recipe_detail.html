{% extends "recipes/base.html" %}
{% load static %}

Making a new template? Copy the blocks from this file, then fill in your details as needed.
Be sure the `extends` tag remains the first line in the file, as Django requires.
And feel free to remove blocks you don't need to change.

{% block recipe_head_title %}{{ recipe.title }}{% endblock %}
{% block head_css %}
  <link rel="stylesheet" href="{% static 'recipes/css/recipe_detail.css' %}?v=0.1.0">
{% endblock head_css %}

{% comment %}
{% block recipe_head_extra_meta %}{% endblock recipe_head_extra_meta %}
{% block recipe_head_js %}{% endblock head_js recipe_head_js %}
{% block recipe_body_container_classes %}{% endblock recipe_body_container_classes %}
{% endcomment %}

{% block recipe_body_content %}
{% with testing="" %}

{# Breadcrumbs #}
{% url 'recipes:recipe-list' as recipes_list_url %}
{% include "widgets/breadcrumbs.html" with page_title=recipe.title extra_links=recipes_list_url|add:"|Recipes" %}

<article class="rec-container"
         data-recipe-id="{{ recipe.id }}">
  <section class="rec-header">
    <h1>{{ recipe.title }}</h1>
    <p class="lead">{{ recipe.subtitle }}</p>
  </section><!-- .rec-header -->


  {% if recipe.description %}
  <section class="rec-description d-print-none">
    {{ recipe.description|safe }}
  </section><!-- .rec-description -->
  {% endif %}


  {% if recipe.ingredients.all %}
  <section class="rec-ingredients">
    <h2>Ingredients</h2>
    {% for ingredient in recipe.ingredients.all %}
      {% if forloop.first %}<ul class="rec-ingredient-list">{% endif %}
      <li class="rec-ingredient-item"
          data-rec-ingredient-id="{{ ingredient.pk }}"
          data-rec-ingredient-type-id="{{ ingredient.type.id }}">
        {% spaceless %}
          {% comment %}
            Using spaceless, we wrap each part in a span so that we can control the spacing around them.
            This means we need to add literal spaces at the end of some strings, before the closing tag,
            in order for the spacing to work out right.

            Meanwhile, we can also add classes to those elements to help target them in future,
            either with CSS or JS.
          {% endcomment %}
          <span class="ingredient-amount">{{ ingredient.amount_fraction_str }} </span>
          {% if ingredient.amount_uom == ingredient.UOM_BLANK %}
            <span class="ingredient-type" data-pluralize>{{ ingredient.type }}{{ ingredient.amount|pluralize }}</span>
          {% else %}
            <span class="ingredient-amount-uom" data-pluralize>{{ ingredient.get_amount_uom_display }}{{ ingredient.amount|pluralize }} </span>
            <span class="ingredient-type">{{ ingredient.type }}</span>
          {% endif %}
          {% if ingredient.preparation %}
          <span class="ingredient-preparation">{{ ingredient.preparation }}</span>
          {% endif %}
        {% endspaceless %}
      </li>
      {% if forloop.last %}</ul>{% endif %}
    {% empty %}
    <p>
      <em>None</em>
    </p>
  {% endfor %}
  </section><!-- .rec-ingredients -->
  {% endif %}


  {% if recipe.directions %}
  <section class="rec-directions">
    <h2>Directions</h2>
    {{ recipe.directions|safe }}
  </section><!-- .rec-directions -->
  {% endif %}


  {% if recipe.footnotes %}
  <section class="rec-footnotes">
    <h2>Footnotes</h2>
    {{ recipe.footnotes|safe }}
  </section><!-- .rec-footnotes -->
  {% endif %}
</article><!-- .rec-container -->

{% endwith %}
{% endblock recipe_body_content %}

{# Inline or other types of JS <script> tags here. #}
{% block recipe_body_js %}{% endblock recipe_body_js %}
